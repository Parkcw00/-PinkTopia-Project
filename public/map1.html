<!DOCTYPE html>
<html>

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>다음 지도 API</title>
  <style>
    /* html, body의 크기를 100%로 설정 */
    html,
    body {
      width: 100%;
      height: 100%;
      margin: 0;
      padding: 0;
    }

    /* 지도 영역을 100%로 설정 */
    #map {
      width: 100%;
      height: 100%;
    }
  </style>
</head>

<body>
  <!-- 화면에 표시되는 지도 크기기 -->
  <div id="map" style="width: 100%;height:100%;"></div>
  <!-- 지도 링크 -->
  <script src="https://dapi.kakao.com/v2/maps/sdk.js?appkey=5dc1bc6ffb574e60204390643bad8557"></script>

  <!-- 지도 -->
  <script>
    let mapContainer = document.getElementById('map'), // 지도를 표시할 div 
      mapOption = {
        center: new kakao.maps.LatLng(36.3275, 127.4268), // 지도의 중심좌표
        level: 5, // 지도의 확대 레벨
        mapTypeId: kakao.maps.MapTypeId.ROADMAP // 지도종류
      };

    // 지도를 생성한다 
    let map = new kakao.maps.Map(mapContainer, mapOption);




    // 지도에 확대 축소 컨트롤을 생성한다
    let zoomControl = new kakao.maps.ZoomControl();

    // 지도의 우측에 확대 축소 컨트롤을 추가한다
    map.addControl(zoomControl, kakao.maps.ControlPosition.RIGHT);

    // 지도 중심 좌표 변화 이벤트를 등록한다
    kakao.maps.event.addListener(map, 'center_changed', function () {
      console.log('지도의 중심 좌표는 ' + map.getCenter().toString() + ' 입니다.');
    });

    // 지도 영역 변화 이벤트를 등록한다
    kakao.maps.event.addListener(map, 'bounds_changed', function () {
      let mapBounds = map.getBounds(),
        message = '지도의 남서쪽, 북동쪽 영역좌표는 ' +
          mapBounds.toString() + '입니다.';

      console.log(message);
    });

    // 지도 클릭 이벤트를 등록한다 (좌클릭 : click, 우클릭 : rightclick, 더블클릭 : dblclick)
    kakao.maps.event.addListener(map, 'click', function (mouseEvent) {
      console.log('지도에서 클릭한 위치의 좌표는 ' + mouseEvent.latLng.toString() + ' 입니다.');
    });

    // 지도 드래깅 이벤트를 등록한다 (드래그 시작 : dragstart, 드래그 종료 : dragend)
    kakao.maps.event.addListener(map, 'drag', function () {
      let message = '지도를 드래그 하고 있습니다. ' +
        '지도의 중심 좌표는 ' + map.getCenter().toString() + ' 입니다.';
      console.log(message);
    });




    // 마커 데이터터
    // [좌표정보 1, 좌표정보 2, '<div style = "padding:5px">내용</div>']
    let data = [
      [36.3275, 127.4268, '<div style = "padding:5px">마커1</div>'],
      [36.3305, 127.4268, '<div style = "padding:5px">마커2</div>'],
      [36.3335, 127.4268, '<div style = "padding:5px">마커3</div>'],
    ]

    for (let i = 0; i < data.length; i++) {

      // 마커 이미지의 주소(북마커아님. 이동이 자유로운 마커)
      let markerImageUrl = 'https://img1.daumcdn.net/thumb/R1280x0/?scode=mtistory2&fname=https%3A%2F%2Fblog.kakaocdn.net%2Fdn%2FbH93Aa%2FbtsMoljgrtT%2FqvUs523LQXMJxSvZaCIJO1%2Fimg.png',
        markerImageSize = new kakao.maps.Size(100, 100), // 마커 이미지의 크기
        markerImageOptions = {
          offset: new kakao.maps.Point(20, 50)// 마커 좌표에 일치시킬 이미지 안의 좌표
        };

      // 마커 이미지를 생성한다
      let markerImage = new kakao.maps.MarkerImage(markerImageUrl, markerImageSize, markerImageOptions);

      // 지도에 마커를 생성하고 표시한다
      let marker = new kakao.maps.Marker({
        position: new kakao.maps.LatLng(data[i][0], data[i][1]), // 마커의 좌표 <- 구글지도에서 '공유유'로 얻을 수 있음
        draggable: true, // 마커를 드래그 가능하도록 설정한다
        image: markerImage, // 마커의 이미지
        map: map // 마커를 표시할 지도 객체
      });

      // 현재 (이동된)마커위치로 전달하기
      let iwContent = '<div style="padding:5px;"> 성심당 케익 부띠크! <br><a href="https://map.kakao.com/link/map/Hello World!,33.450701,126.570667" style="color:skyblue" target="_blank">큰지도보기</a> <a href="https://map.kakao.com/link/to/Hello World!,33.450701,126.570667" style="color:blue" target="_blank">길찾기</a></div>' // 인포윈도우에 표출될 내용으로 HTML 문자열이나 document element가 가능합니다
      // 이미 마커에 좌표가 있어서 불필요
      // iwPosition = new kakao.maps.LatLng(36.3275, 127.4268); //인포윈도우 표시 위치입니다

      // 인포윈도우를 생성합니다
      let infowindow = new kakao.maps.InfoWindow({
        position: iwPosition,
        content: iwContent
      });

      // 마커 위에 인포윈도우를 표시합니다. 두번째 파라미터인 marker를 넣어주지 않으면 지도 위에 표시됩니다
      infowindow.open(map, marker);

    }






  </script>
</body>

</html>